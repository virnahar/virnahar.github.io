<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aether: The Journey of Love</title>
    <style>
        :root { --pink: #ff4d6d; --gold: #ffd700; --bg: #0a000d; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: var(--bg); font-family: 'Georgia', serif; }
        
        /* Background Glow */
        #aura {
            position: absolute; width: 100%; height: 100%;
            background: radial-gradient(circle at center, rgba(255, 77, 109, 0.15) 0%, rgba(0,0,0,0) 70%);
            pointer-events: none; transition: background 1.5s ease;
        }

        /* Start Screen */
        #start-screen {
            position: fixed; inset: 0; z-index: 100; background: var(--bg);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: white; text-align: center; cursor: pointer;
        }

        /* Glass Text Panel - Moved to bottom to avoid covering shapes */
        #ui-panel {
            position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%);
            width: 85%; max-width: 400px; padding: 25px;
            background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px);
            border-radius: 25px; border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center; color: white; z-index: 50; pointer-events: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); opacity: 0; transition: opacity 1s;
        }

        #title { font-size: 1.8rem; margin: 0; font-weight: 100; color: var(--pink); letter-spacing: 2px; }
        #msg { font-size: 0.95rem; margin-top: 10px; line-height: 1.6; font-style: italic; color: #eee; min-height: 60px; }

        canvas { display: block; position: absolute; top: 0; left: 0; }
    </style>
</head>
<body>

    <div id="start-screen" onclick="startExperience()">
        <h1 style="font-weight: 100; letter-spacing: 10px;">AETHER</h1>
        <p style="opacity: 0.5; font-size: 0.7rem; letter-spacing: 3px;">TAP TO BEGIN THE ODYSSEY</p>
    </div>

    <div id="aura"></div>
    <div id="ui-panel">
        <div id="day-label" style="font-size: 0.6rem; letter-spacing: 4px; opacity: 0.6; text-transform: uppercase;"></div>
        <h1 id="title"></h1>
        <p id="msg"></p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        let scene, camera, renderer, mainShape, stars, audioCtx;
        let step = -1;
        let isMoving = false;

        const journey = [
            { day: "Feb 7", title: "The Rose", msg: "A single bloom in a digital garden, scented with forever.", color: 0xff1e56, type: "rose" },
            { day: "Feb 8", title: "The Promise", msg: "A vow written in the stars, etched into our source code.", color: 0x00d4ff, type: "knot" },
            { day: "Feb 9", title: "Chocolate", msg: "Sweeter than the richest cocoa, warmer than the sun.", color: 0xffaa00, type: "box" },
            { day: "Feb 10", title: "The Embrace", msg: "Holding you in the quiet space between heartbeats.", color: 0xff85a2, type: "sphere" },
            { day: "Feb 14", title: "Infinity", msg: "No matter where we are, my heart beats only for you.", color: 0xff4d6d, type: "heart" }
        ];

        function startExperience() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('ui-panel').style.opacity = '1';
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            init();
            animate();
            nextStep();
        }

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 1000);
            camera.position.z = 80;

            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.body.appendChild(renderer.domElement);

            // Romantic Ambient Particles
            const starGeo = new THREE.BufferGeometry();
            const positions = [];
            for(let i=0; i<1500; i++) {
                positions.push((Math.random()-0.5)*400, (Math.random()-0.5)*400, (Math.random()-0.5)*400);
            }
            starGeo.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
            stars = new THREE.Points(starGeo, new THREE.PointsMaterial({color: 0xffffff, size: 0.7, transparent: true, opacity: 0.4}));
            scene.add(stars);

            // Lighting
            const pLight = new THREE.PointLight(0xffffff, 2, 200);
            pLight.position.set(20, 30, 50);
            scene.add(pLight);
            scene.add(new THREE.AmbientLight(0x333333));

            window.addEventListener('mousedown', nextStep);
            window.addEventListener('touchstart', (e) => { e.preventDefault(); nextStep(); }, {passive: false});
        }

        function playHeartbeat() {
            if (!audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sine';
            osc.frequency.setValueAtTime(60, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(30, audioCtx.currentTime + 0.3);
            gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + 0.3);
        }

        function nextStep() {
            if(isMoving) return;
            step++;
            if(step >= journey.length) {
                showFinalMessage();
                return;
            }
            isMoving = true;
            playHeartbeat();

            const data = journey[step];
            
            // UI Update
            document.getElementById('day-label').innerText = data.day;
            document.getElementById('title').innerText = data.title;
            document.getElementById('title').style.color = new THREE.Color(data.color).getStyle();
            document.getElementById('aura').style.background = `radial-gradient(circle at center, ${new THREE.Color(data.color).getStyle()}33 0%, rgba(0,0,0,0) 70%)`;
            
            // Typewriter
            let i = 0;
            const msgEl = document.getElementById('msg');
            msgEl.innerHTML = "";
            const timer = setInterval(() => {
                msgEl.innerHTML += data.msg.charAt(i);
                i++;
                if(i >= data.msg.length) { clearInterval(timer); isMoving = false; }
            }, 30)

            // Geometry Update
            if(mainShape) scene.remove(mainShape);
            let geo;
            if(data.type === 'rose') geo = new THREE.TorusKnotGeometry(12, 5, 64, 8, 2, 5);
            else if(data.type === 'knot') geo = new THREE.TorusKnotGeometry(10, 3, 100, 16);
            else if(data.type === 'box') geo = new THREE.BoxGeometry(18, 18, 18);
            else if(data.type === 'sphere') geo = new THREE.SphereGeometry(15, 32, 32);
            else if(data.type === 'heart') {
                const s = new THREE.Shape();
                s.moveTo(0,0); s.bezierCurveTo(0,-3,-5,-15,-20,-15); s.bezierCurveTo(-35,-15,-35,7,-35,7);
                s.bezierCurveTo(-35,11,-30,24,0,40); s.bezierCurveTo(30,24,35,11,35,7);
                s.bezierCurveTo(35,7,35,-15,20,-15); s.bezierCurveTo(5,-15,0,-3,0,0);
                geo = new THREE.ExtrudeGeometry(s, {depth: 6, bevelEnabled: true});
                geo.center();
            }

            const mat = new THREE.MeshPhongMaterial({ 
                color: data.color, 
                shininess: 100, 
                emissive: data.color, 
                emissiveIntensity: 0.4,
                flatShading: data.type === 'box'
            });
            mainShape = new THREE.Mesh(geo, mat);
            if(data.type === 'heart') mainShape.rotation.x = Math.PI;
            scene.add(mainShape);
        }

        function showFinalMessage() {
            document.getElementById('ui-panel').style.bottom = '40%';
            document.getElementById('day-label').style.display = 'none';
            document.getElementById('title').innerText = "For You";
            document.getElementById('msg').innerHTML = "I can't show what you mean to me in pixels or code... You are my favorite reality.<br><br>Happy Valentine's Day.";
            if(mainShape) mainShape.scale.set(1.5, 1.5, 1.5);
        }

        function animate() {
            requestAnimationFrame(animate);
            if(mainShape) {
                mainShape.rotation.y += 0.005;
                mainShape.rotation.z += 0.002;
                const p = 1 + Math.sin(Date.now()*0.002)*0.05;
                mainShape.scale.set(p,p,p);
            }
            stars.rotation.y += 0.0003;
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>

